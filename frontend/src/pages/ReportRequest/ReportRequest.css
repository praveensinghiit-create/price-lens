:root {
  --primary-color: #2c3e50;
  --secondary-color: #3498db;
  --success-color: #27ae60;
  --warning-color: #f1c40f;
  --danger-color: #e74c3c;
  --light-bg: #f8f9fa;
  --border-radius: 8px;
  --box-shadow: 0 2px 15px rgba(0,0,0,0.07);
  --transition-speed: 0.3s;
}
.loader {
  border: 3px solid #f3f3f3;
  border-top: 3px solid #1a237e;
  border-radius: 50%;
  width: 16px;
  height: 16px;
  animation: spin 0.8s linear infinite;
  display: inline-block;
  vertical-align: middle;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


.container {
  max-width: 900px;
  margin: 2rem auto;
  padding: 2rem;
  background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--light-bg);
}
.title {
  color: var(--primary-color);
  font-size: 2rem;
  margin: 0;
}
.userProfile {
  display: flex;
  align-items: center;
  gap: 1rem;
}
.avatar {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  border: 2px solid var(--secondary-color);
  object-fit: cover;
}
.userName {
  font-weight: 600;
  color: var(--primary-color);
}

.requestInfo {
  margin: 1.5rem 0;
  font-size: 1.1rem;
}
.label {
  font-weight: 600;
  color: var(--primary-color);
}
.requestId {
  font-weight: 700;
  color: var(--secondary-color);
  margin-left: 0.5rem;
}

/* --- Major Update: .requestForm Grid Layout --- */
.requestForm {
  display: grid;
  /* Defines three explicit columns:
     1. First column for "Product Category" (min 220px, grows 1x)
     2. Second column for "Description" (min 250px, grows 1.5x, wider than category)
     3. Third column for "Create Request" button (auto width based on button content) */
  grid-template-columns: minmax(220px, 1fr) minmax(250px, 1.5fr) auto;
  gap: 1.5rem; /* Consistent spacing between grid items (columns and rows) */
  align-items: start; /* Aligns all direct grid children (form groups and button) to the top of their cells */
  margin-bottom: 2rem;
}

.formGroup {
  display: flex;
  flex-direction: column;
  gap: 0.5rem; /* Space between label and input/select */
}
.formLabel {
  font-weight: 600;
  color: var(--primary-color);
  /* Removed 'height: 80px;' from here if it was present, as it caused label misalignment */
}
.formInput,
.formSelect {
  padding: 0.7rem 1rem;
  border: 1px solid #e0e7ef;
  border-radius: var(--border-radius);
  font-size: 1rem;
  transition: border-color var(--transition-speed) ease;
}
.formInput:focus,
.formSelect:focus {
  border-color: var(--secondary-color);
  outline: none;
}

/* --- Specific Styling for Description Field --- */
/* Target the input field inside the second form group (which is 'Description') */
.formGroup:nth-child(2) .formInput {
  min-height: 100px; /* Makes the description input taller, closer to a square */
  resize: vertical; /* Allows the user to manually resize the height */
  padding: 1rem; /* Adjusts padding for better aesthetics with increased height */
}

/* --- Positioning for Create Request Button --- */
.submitButton {
  /* Original button styles */
  padding: 0.7rem 2rem;
  background-color: var(--secondary-color);
  color: white;
  border: none;
  border-radius: var(--border-radius);
  font-weight: 600;
  cursor: pointer;
  transition: background-color var(--transition-speed) ease;

  /* Positioning in the new grid layout */
  grid-column: 3; /* Explicitly places the button in the third column */
  /* 'align-self: start;' is handled by the parent '.requestForm's 'align-items: start' */
  /* Add margin-top to vertically align the button's top with the description input's top */
  /* This value might need minor tweaking based on exact font sizes and browser rendering */
  margin-top: 1.5rem; /* This moves the button down to visually align with input fields' content */
}
.submitButton:hover {
  background-color: #217dbb;
}

.tableWrapper {
  overflow-x: auto;
}
.responsiveTable {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0 2rem 0;
  background: white;
  border-radius: var(--border-radius);
  box-shadow: 0 1px 4px rgba(0,0,0,0.03);
}
.responsiveTable th,
.responsiveTable td {
  padding: 0.9rem 1rem;
  text-align: left;
  border-bottom: 1px solid #f0f4f8;
}
.responsiveTable th {
  background-color: var(--light-bg);
  color: var(--primary-color);
  font-weight: 700;
}
.statusBadge {
  display: inline-block;
  padding: 0.3rem 0.9rem;
  border-radius: 20px;
  font-size: 0.95rem;
  font-weight: 600;
}
.complete {
  background-color: #e6f4ea;
  color: #137333;
}
.inprogress {
  background-color: #fff3cd;
  color: #856404;
}
.unassigned {
  background-color: #fce8e6;
  color: #c5221f;
}
.reportLink {
  color: var(--secondary-color);
  text-decoration: underline;
  font-weight: 600;
  transition: color var(--transition-speed);
}
.reportLink:hover {
  color: var(--primary-color);
}
.downloadButton {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1.2rem;
  background: none;
  border: 2px solid var(--secondary-color);
  border-radius: var(--border-radius);
  color: var(--secondary-color);
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-speed) ease;
}
.downloadButton:hover {
  background-color: var(--secondary-color);
  color: white;
}
.pendingLabel {
  color: #6b7280;
  font-style: italic;
}

.notes {
  margin-top: 2.5rem;
  padding: 1.2rem 1.5rem;
  background-color: var(--light-bg);
  border-radius: var(--border-radius);
}
.notesTitle {
  color: var(--primary-color);
  margin-top: 0;
  margin-bottom: 0.7rem;
}
.noteList {
  margin: 0;
  padding-left: 1.1em;
}
.noteList li {
  margin-bottom: 0.5em;
  line-height: 1.5;
}

/* --- Responsive Adjustments --- */
@media (max-width: 700px) {
  .container {
    padding: 1rem;
  }
  .header {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }
  .requestForm {
    grid-template-columns: 1fr; /* Stacks all form elements vertically on small screens */
    gap: 1rem; /* Reduced gap for mobile */
  }
  .submitButton {
    grid-column: 1; /* Button now spans the full width on mobile */
    justify-self: stretch; /* Stretches horizontally */
    margin-top: 1rem; /* Adjusted top margin for mobile */
  }
  .responsiveTable th,
  .responsiveTable td {
    padding: 0.6rem 0.5rem;
    font-size: 0.98rem;
  }
}
/* --- Chatbot Specific Styles --- */

.chat-widget {
  position: fixed;
  bottom: 30px; /* Distance from bottom */
  right: 30px; /* Distance from right */
  z-index: 1000; /* Ensure it's on top of other content */
  display: flex;
  flex-direction: column;
  align-items: flex-end; /* Align the button to the right */
}

.chat-toggle-btn {
  background-color: var(--secondary-color);
  color: white;
  border: none;
  border-radius: 50%; /* Make it round */
  width: 60px; /* Size of the button */
  height: 60px; /* Size of the button */
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1.8rem;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  transition: transform 0.3s ease, background-color 0.3s ease;
  z-index: 1001; /* Above the chat window if overlapping */
}

.chat-toggle-btn img {
  width: 30px; /* Adjust icon size */
  height: 30px;
  filter: invert(100%); /* Make icon white if it's dark */
}

.chat-toggle-btn:hover {
  background-color: #217dbb;
  transform: scale(1.05);
}

.chat-window {
  background-color: white;
  border-radius: var(--border-radius);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
  width: 350px; /* Width of chat window */
  height: 450px; /* Height of chat window */
  display: flex;
  flex-direction: column;
  overflow: hidden; /* Hide scrollbars if content is within bounds */
  margin-bottom: 20px; /* Space between window and toggle button */
  transform: translateY(20px); /* Initial subtle animation */
  opacity: 0;
  pointer-events: none; /* Make it unclickable when closed */
  transition: transform 0.3s ease, opacity 0.3s ease, margin-bottom 0.3s ease;
}

/* State for when chat is open */
.chat-widget.open .chat-window {
  transform: translateY(0);
  opacity: 1;
  pointer-events: auto; /* Make it clickable when open */
}

.chat-header {
  background-color: var(--primary-color);
  color: white;
  padding: 1rem 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #e0e7ef;
}

.chat-header h3 {
  margin: 0;
  font-size: 1.1rem;
}

.chat-close-btn {
  background: none;
  border: none;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  padding: 0;
}

.chat-messages {
  flex-grow: 1;
  padding: 1rem;
  overflow-y: auto;
  background-color: #f0f2f5; /* Light grey background for messages area */
  display: flex;
  flex-direction: column;
  gap: 10px; /* Space between messages */
}

.chat-message {
  max-width: 80%;
  padding: 0.8rem 1rem;
  border-radius: 18px; /* Rounded corners for chat bubbles */
  line-height: 1.4;
  word-wrap: break-word; /* Ensure long words break */
}

.chat-message.user {
  align-self: flex-end; /* Align user messages to the right */
  background-color: var(--secondary-color);
  color: white;
  border-bottom-right-radius: 5px; /* Slightly different radius for the corner */
}

.chat-message.bot {
  align-self: flex-start; /* Align bot messages to the left */
  background-color: var(--light-bg);
  color: var(--primary-color);
  border: 1px solid #e0e7ef;
  border-bottom-left-radius: 5px; /* Slightly different radius for the corner */
}

.chat-welcome {
    text-align: center;
    font-style: italic;
    color: #6b7280;
    margin-top: auto; /* Push to bottom if few messages */
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 8px;
    background-color: #e6f7ff;
    border: 1px solid #a8e3ff;
}


.chat-input-area {
  display: flex;
  padding: 1rem;
  border-top: 1px solid #e0e7ef;
  background-color: white;
}

.chat-input {
  flex-grow: 1;
  padding: 0.7rem 1rem;
  border: 1px solid #e0e7ef;
  border-radius: 20px; /* Rounded input field */
  margin-right: 10px;
  font-size: 1rem;
}

.chat-input:focus {
  border-color: var(--secondary-color);
  outline: none;
}

.chat-send-btn {
  background-color: var(--secondary-color);
  color: white;
  border: none;
  border-radius: 20px; /* Rounded send button */
  padding: 0.7rem 1.2rem;
  cursor: pointer;
  transition: background-color var(--transition-speed) ease;
}

.chat-send-btn:hover {
  background-color: #217dbb;
}

/* Responsive adjustments for chatbot */
@media (max-width: 500px) {
  .chat-widget {
    bottom: 20px;
    right: 20px;
  }
  .chat-window {
    width: calc(100vw - 40px); /* Full width minus margin */
    height: 70vh; /* Takes up more vertical space on small screens */
    margin-bottom: 15px;
  }
  .chat-toggle-btn {
    width: 50px;
    height: 50px;
    font-size: 1.5rem;
  }
}